CREATE TABLE Leiloes (
ID INTEGER NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
NATUREZA VARCHAR(50) NOT NULL,
FORMA_LANCES VARCHAR(50) NOT NULL,
INICIO TIMESTAMP NOT NULL,
TERMINO TIMESTAMP NOT NULL,
VALOR DECIMAL(19, 4) NOT NULL
);
CREATE TABLE Categorias (
ID INTEGER NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
CATEGORIA VARCHAR(100) NOT NULL
);
CREATE TABLE Usuarios (
ID INTEGER NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
NOME VARCHAR(100) NOT NULL,
CP VARCHAR(14) NOT NULL,
EMAIL VARCHAR(100) NOT NULL
);
CREATE TABLE Bens (
ID INTEGER NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
DESCRICAO_SIMPLES VARCHAR(100),
DESCRICAO_COMPLETA VARCHAR(2000)
);
CREATE TABLE Lotes (
ID INTEGER NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
ID_LEILAO INTEGER NOT NULL,
ID_USUARIO INTEGER NOT NULL
);
CREATE TABLE Categorias_Bens (
ID INTEGER NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
ID_BEM INTEGER NOT NULL,
ID_CATEGORIA INTEGER NOT NULL
);
CREATE TABLE Bens_Lotes (
ID INTEGER NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
ID_BEM INTEGER NOT NULL,
ID_LOTE INTEGER NOT NULL
);
CREATE TABLE Leiloes_Usuarios (
ID INTEGER NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
ID_LEILAO INTEGER NOT NULL,
ID_USUARIO INTEGER NOT NULL
);
CREATE TABLE Lances (
ID INTEGER NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
ID_USUARIO INTEGER NOT NULL,
ID_LOTE INTEGER NOT NULL,
DATA TIMESTAMP NOT NULL,
VALOR DECIMAL(19, 4) NOT NULL
);
CREATE TABLE Vencedores (
ID INTEGER NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
ID_USUARIO INTEGER NOT NULL,
ID_LOTE INTEGER NOT NULL
);
ALTER TABLE Lotes
ADD FOREIGN KEY (ID_LEILAO)
REFERENCES Leiloes(ID);
ALTER TABLE Lotes
ADD FOREIGN KEY (ID_USUARIO)
REFERENCES Usuarios(ID);
ALTER TABLE Categorias_Bens
ADD FOREIGN KEY (ID_BEM)
REFERENCES Bens(ID);
ALTER TABLE Categorias_Bens
ADD FOREIGN KEY (ID_CATEGORIA)
REFERENCES Categorias(ID);
ALTER TABLE Bens_Lotes
ADD FOREIGN KEY (ID_BEM)
REFERENCES Bens(ID);
ALTER TABLE Bens_Lotes
ADD FOREIGN KEY (ID_LOTE)
REFERENCES Lotes(ID);
ALTER TABLE Leiloes_Usuarios
ADD FOREIGN KEY (ID_LEILAO)
REFERENCES Leiloes(ID);
ALTER TABLE Leiloes_Usuarios
ADD FOREIGN KEY (ID_USUARIO)
REFERENCES Usuarios(ID);
ALTER TABLE Lances
ADD FOREIGN KEY (ID_USUARIO)
REFERENCES Usuarios(ID);
ALTER TABLE Lances
ADD FOREIGN KEY (ID_LOTE)
REFERENCES Lotes(ID);
ALTER TABLE Vencedores
ADD FOREIGN KEY (ID_USUARIO)
REFERENCES Usuarios(ID);
ALTER TABLE Vencedores
ADD FOREIGN KEY (ID_LOTE)
REFERENCES Lotes(ID);
INSERT INTO Usuarios (NOME, CP, EMAIL) VALUES ('Felipe Castro', '11111111111', 'fpocastro@gmail.com')